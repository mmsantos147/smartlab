# DS18B20

Para o uso do DS18B20 no sistema, utilizamos as informações contidas no site do [ESPHome Dallas Temperature Sensor](https://esphome.io/components/sensor/dallas_temp/).

## Comunicação

O sensor DS18B20 utiliza de uma conexão 1-wire, que permite a comunicação entre dispositivos usando apenas um fio de dados. A conexão 1-wire requer um resistor pull-up para os dados com o terminal de $3.3V$, conectamos um resistor de 4.5kΩ. O recomendado é utilizar resistor de 4.7kΩ, mas resistor de 4.5kΩ é funcional.

## Implementação

Para conecta-lo ao Home Assistant foi necessário ajustar o arquivo de configuração yaml do ESPHome para ler os dados captados do sensor.

Arquivo de configuração .YAML:

```yaml
one_wire:
  - platform: gpio
    pin: GPIO19

sensor:    
    - platform: dallas_temp
        name: "Temperatura DS18B20"
        update_interval: 5s
```

- Parâmetros configuráveis: 
  - sensor
    - address (Opcional, int): O endereço do sensor
    - index (Opcional, byte): O indice do sensor. Necessário se tem mais de um dispositivo na conexão e o endereço não é especificado. 
      - Observação: O indice é baseado no endereço do hardware, e pode mudar se sensores são removidos, adicionados ou alterados.
    - resolution (Opcional, int): A resolução opcional de 9 a 12. Quanto maior o valor mais preciso a leitura do sensor, o padrão é o valor mais alto possível.
    - update_interval (Opcional, Time): Intervalo entre os monitoramentos. Padrão é 60s.
    - one_wire_id (Opcional, 1-Wire Bus): O id da conexão 1-Wire, necessário se tiver mais de uma conexão.
  - one_wire: Declara a configuração do barramento de comunicação 1-Wire
    - platform: Define a plataforma de hardware usada para o barramento 1-Wire
    - gpio: Indica que o barramento 1-Wire será implementado via um pino GPIO do ESP32
    - pin: (Obrigatório) Especifica o pino GPIO do ESP32 onde a linha de dados do sensor DS18B20 está conectada
      - Neste caso: GPIO19

***

# DS18B20

For using the DS18B20 in the system, we utilized the information contained on the [ESPHome Dallas Temperature Sensor](https://esphome.io/components/sensor/dallas_temp/) website.

## Communication

The DS18B20 sensor uses a 1-wire connection, which allows communication between devices using only one data wire. The 1-wire connection requires a pull-up resistor for data with the $3.3V$ terminal, we connected a 4.5kΩ resistor. The recommended resistor is 4.7kΩ, but a 4.5kΩ resistor is functional.

## Implementation

To connect it to Home Assistant, it was necessary to adjust the ESPHome yaml configuration file to read the data captured from the sensor.

Configuration file .YAML:
```yaml
one_wire:
  - platform: gpio
    pin: GPIO19

sensor:    
    - platform: dallas_temp
        name: "DS18B20 Temperature"
        update_interval: 5s
```

- Configurable parameters:
  - sensor
    - address (Optional, int): The sensor address
    - index (Optional, byte): The sensor index. Required if there is more than one device on the connection and the address is not specified.
      - Note: The index is based on the hardware address, and may change if sensors are removed, added or modified.
    - resolution (Optional, int): The optional resolution from 9 to 12. The higher the value, the more accurate the sensor reading, the default is the highest possible value.
    - update_interval (Optional, Time): Interval between monitoring. Default is 60s.
    - one_wire_id (Optional, 1-Wire Bus): The 1-Wire connection id, required if there is more than one connection.
  - one_wire: Declares the 1-Wire communication bus configuration
    - platform: Defines the hardware platform used for the 1-Wire bus
    - gpio: Indicates that the 1-Wire bus will be implemented via an ESP32 GPIO pin
    - pin: (Required) Specifies the ESP32 GPIO pin where the DS18B20 sensor data line is connected
      - In this case: GPIO19